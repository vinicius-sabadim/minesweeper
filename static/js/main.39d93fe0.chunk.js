(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,r){e.exports=r(55)},53:function(e,t,r){},54:function(e,t,r){},55:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(10),i=r.n(o),c=r(14),l=r(5),s=r.n(l),d=r(11),u=r(2),g=r(12),m=r(15),b=r(13),E=r(16),p={BEGINNER:9,INTERMEDIATE:16,EXPERT:30},h={BEGINNER:9,INTERMEDIATE:16,EXPERT:16},f={READY:0,PLAYING:1,GAME_OVER:2,VICTORY:3},v={BEGINNER:10,INTERMEDIATE:40,EXPERT:99},x=function(e){return e.row-1>=0},C=function(e,t){return e.row+1<t},O=function(e){return e.column-1>=0},j=function(e,t){return e.column+1<t},F=function(e,t){return e===f.READY&&(t.length>1||!t[0].hasBomb)},A=function(e,t){return t?e-1:e+1},R=r(6),w=function(e,t){var r=e*t;return Object(R.a)(Array(r)).reduce(function(e,r,n){var a=parseInt(n,10);return[].concat(Object(R.a)(e),[{id:a,row:Math.floor(a/t),column:a%t,hasBomb:!1,hasFlag:!1,dangerLevel:0,isHovered:!1,isVisible:!1,neighbors:[]}])},[])},B=function(e,t,r,n,a){for(var o=new Set;o.size<n;){var i=k(e,t,r,a);o.add(i)}return e.map(function(e){return o.has(e.id)?Object(u.a)({},e,{hasBomb:!0,explode:!1}):e})},N=function(e){return Math.floor(Math.random()*e)},k=function(e,t,r,n){var a=t*r;if(!n)return N(a);for(var o=[e[0].id,e[r-1].id,e[(t-1)*r].id,e[e.length-1].id],i=null;!i;){var c=N(a);o.includes(c)||(i=c)}return i},T=function(e,t,r){return e.map(function(e){var n=e.neighbors;return x(e)&&O(e)&&n.push(e.id-r-1),x(e)&&n.push(e.id-r),x(e)&&j(e,r)&&n.push(e.id-r+1),O(e)&&n.push(e.id-1),j(e,r)&&n.push(e.id+1),C(e,t)&&O(e)&&n.push(e.id+r-1),C(e,t)&&n.push(e.id+r),C(e,t)&&j(e,r)&&n.push(e.id+r+1),Object(u.a)({},e,{neighbors:n})})},L=function(e){return e.map(function(t){return Object(u.a)({},t,{dangerLevel:y(e,t)})})},y=function(e,t){return t.neighbors.reduce(function(t,r){return e[r].hasBomb?t+1:t},0)},I=function(e,t){return e.filter(function(e){return e.isVisible}).length+t===e.length},G=a.a.createContext(),S=function(e){function t(){var e,r;Object(g.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(r=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={bombsRemaining:10,cheat:{cleanCorners:!1,hover:!1},grid:[],navigateUsingArrow:0,status:f.READY,selectedLevel:"BEGINNER",time:0},r.timer=function(){},r.componentDidMount=function(){return r.startGrid()},r.startGrid=function(){var e=r.state.selectedLevel,t=v[e],n=h[e],a=p[e],o=r.state.cheat.cleanCorners,i=w(n,a),c=B(i,n,a,t,o),l=T(c,n,a),s=L(l);r.setState({grid:s})},r.restartGame=function(e){e&&0===e.detail||(r.stopTimer(),r.setState({bombsRemaining:v[r.state.selectedLevel],cheat:Object(u.a)({},r.state.cheat,{cleanCorners:!1}),navigateUsingArrow:0,status:f.READY,time:0}),r.startGrid())},r.changeLevel=function(e){r.setState({selectedLevel:e},r.restartGame)},r.cellClicked=function(e){var t=r.state,n=t.selectedLevel,a=t.status;if(a===f.READY||a===f.PLAYING){var o,i=v[n],c=!0,l=!1,s=void 0;try{for(var d,u=e[Symbol.iterator]();!(c=(d=u.next()).done);c=!0){var g=d.value;if(g.isVisible)return;if(g.hasFlag)return;o=r.changeCellToVisible(r.state.grid,g),g.hasBomb?(r.setState({status:f.GAME_OVER}),o=r.clickedOnBomb(o,g)):I(o,i)&&(r.stopTimer(),r.setState({status:f.VICTORY}))}}catch(m){l=!0,s=m}finally{try{c||null==u.return||u.return()}finally{if(l)throw s}}F(a,e)&&r.setState({status:f.PLAYING},r.startTimer),r.setState({grid:o})}},r.changeCellToVisible=function(e,t){return e[t.id]=Object(u.a)({},t,{isVisible:!0}),0!==t.dangerLevel||t.hasBomb||t.isVisible||t.neighbors.forEach(function(t){r.changeCellToVisible(e,e[t])}),e},r.clickedOnBomb=function(e,t){return r.stopTimer(),r.updateGrid(e,t.id,{isVisible:!0,explode:!0}).map(function(e){return e.hasBomb&&!e.explode?Object(u.a)({},e,{isVisible:!0}):e})},r.toggleFlag=function(e,t){if(t&&t.preventDefault(),!e.isVisible){var n=r.state.grid[e.id],a=!n.hasFlag,o=r.updateGrid(r.state.grid,n.id,{hasFlag:a});r.setState({bombsRemaining:A(r.state.bombsRemaining,a),grid:o})}},r.updateGrid=function(e,t,r){return e.map(function(e){return e.id!==t?e:Object(u.a)({},e,r)})},r.setHover=function(e,t){if(r.state.cheat.hover){var n=r.updateGrid(r.state.grid,e.id,{isHovered:t});e.neighbors.forEach(function(e){n[e].isHovered=t}),r.setState({grid:n})}},r.cleanCorners=function(e){e&&0===e.detail||r.setState({cheat:Object(u.a)({},r.state.cheat,{cleanCorners:!0})},Object(d.a)(s.a.mark(function e(){var t,n,a,o,i,c,l,d,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.restartGame();case 2:t=r.state,n=t.grid,a=t.selectedLevel,o=h[a],i=p[a],c=n[0],l=n[i-1],d=n[(o-1)*i],u=n[n.length-1],r.cellClicked([c,l,d,u]);case 10:case"end":return e.stop()}},e)})))},r.toggleCheatHover=function(){var e=r.state.cheat;r.setState({cheat:Object(u.a)({},e,{hover:!e.hover})})},r.changeNavigation=function(e){var t=r.state.navigateUsingArrow,n=r.state.grid[t],a=r.state.selectedLevel,o=h[a],i=p[a],c=t;"down"===e&&C(n,o)?c=t+i:"up"===e&&x(n)?c=t-i:"left"===e&&O(n)?c=t-1:"right"===e&&j(n,i)?c=t+1:"trigger"===e?r.cellClicked([n]):"flag"===e?r.toggleFlag(n):"restart"===e?r.restartGame():"clean"===e&&r.cleanCorners(),r.setState({navigateUsingArrow:c})},r.startTimer=function(){r.timer=setInterval(function(){r.setState({time:r.state.time+1})},1e3)},r.stopTimer=function(){clearInterval(r.timer)},r.render=function(){return a.a.createElement(G.Provider,{value:{bombsRemaining:r.state.bombsRemaining,changeLevel:r.changeLevel,changeNavigation:r.changeNavigation,cellClicked:r.cellClicked,cheat:r.state.cheat,cleanCorners:r.cleanCorners,grid:r.state.grid,isGameOver:r.state.status===f.GAME_OVER,isVictory:r.state.status===f.VICTORY,navigateUsingArrow:r.state.navigateUsingArrow,restartGame:r.restartGame,selectedLevel:r.state.selectedLevel,time:r.state.time,toggleCheatHover:r.toggleCheatHover,toggleFlag:r.toggleFlag,setHover:r.setHover}},r.props.children)},r}return Object(E.a)(t,e),t}(a.a.Component),V=G,D=r(1),H={alignItems:"center",backgroundColor:"#DDDDDD",cursor:"pointer",display:"flex",fontWeight:"bold",height:"2rem",justifyContent:"center",maxHeight:"40px",maxWidth:"40px",position:"relative",userSelect:"none",width:"2rem"},M={cell:Object(D.css)(Object(u.a)({},H,{borderTop:"2px solid #EEEEEE",borderLeft:"2px solid #EEEEEE",borderBottom:"2px solid #555555",borderRight:"2px solid #555555",":hover":{backgroundColor:"#EEEEEE"}})),cellOver:Object(D.css)(Object(u.a)({},H,{borderTop:"2px solid #EEEEEE",borderLeft:"2px solid #EEEEEE",borderBottom:"2px solid #555555",borderRight:"2px solid #555555"})),cellVisible:Object(D.css)(Object(u.a)({},H,{backgroundColor:"#CCCCCC",borderTop:"2px solid #555555",borderLeft:"2px solid #555555",borderBottom:"2px solid #CCCCCC",borderRight:"2px solid #CCCCCC"})),cellHovered:Object(D.css)({backgroundColor:"#90FC6F"}),cellExploded:Object(D.css)(Object(u.a)({},H,{backgroundColor:"#F76767",borderTop:"2px solid #555555",borderLeft:"2px solid #555555",borderBottom:"2px solid #F76767",borderRight:"2px solid #F76767"})),cellFlag:Object(D.css)(Object(u.a)({},H,{borderTop:"2px solid #EEEEEE",borderLeft:"2px solid #EEEEEE",borderBottom:"2px solid #555555",borderRight:"2px solid #555555"})),cellNavigation:Object(D.css)({backgroundColor:"linen",borderBottom:"2px solid #555555",borderRight:"2px solid #555555"}),emoji:Object(D.css)({color:"red",fontSize:"20px",height:"1.5rem"}),value:Object(D.css)({fontSize:"22px"})},Y=["","#4286F4","#0BA51B","#6E25DB","#DB7325","#E22FB6","#D11F1F","#398452","#683B39"],P=function(e,t){return e.hasFlag?M.cellFlag:e.isVisible&&e.explode?M.cellExploded:e.isVisible?M.cellVisible:t?M.cellOver:M.cell},z=function(e){if(e.isHovered)return M.cellHovered},U=function(e,t){if(e.id===t)return M.cellNavigation},X=function(e){return e.hasFlag?"\ud83d\udea9":e.isVisible?e.hasBomb?"\ud83d\udca3":e.dangerLevel>0?e.dangerLevel:"":""},W=function(e){var t=e.cell,r=Object(n.useContext)(V),o=r.isGameOver,i=r.cellClicked,c=r.navigateUsingArrow,l=r.toggleFlag,s=r.setHover;return a.a.createElement("td",{className:"".concat(P(t,o)," ").concat(z(t)," ").concat(U(t,c)),style:{color:Y[t.dangerLevel]},onClick:i.bind(void 0,[t]),onContextMenu:l.bind(void 0,t),onMouseEnter:s.bind(void 0,t,!0),onMouseLeave:s.bind(void 0,t,!1)},a.a.createElement("span",{className:t.hasBomb||t.hasFlag?M.emoji:M.value},X(t)))},_={row:Object(D.css)({display:"flex",justifyContent:"center"})},J=function(e){var t=e.row;return a.a.createElement("tr",{className:_.row},t.map(function(e,t){return a.a.createElement(W,{key:"cell-".concat(t),cell:e})}))},q={grid:Object(D.css)({borderCollapse:"collapse",borderTop:"2px solid #555555",borderLeft:"2px solid #555555",borderBottom:"2px solid #EEEEEE",borderRight:"2px solid #EEEEEE",height:"100%"})},K={ArrowDown:"down",ArrowUp:"up",ArrowLeft:"left",ArrowRight:"right",Enter:"trigger",a:"trigger",f:"flag",r:"restart",c:"clean"},Q=function(e){for(var t,r=(t=function(e){return e.row},e.reduce(function(e,r){var n=t(r);return e[n]?e[n].push(r):e[n]=[r],e},{})),n=[],o=Object.entries(r),i=0;i<o.length;i++){var l=o[i],s=Object(c.a)(l,2),d=s[0],u=s[1];n.push(a.a.createElement(J,{key:"row-".concat(d),row:u}))}return n},Z=function(){var e=Object(n.useContext)(V),t=e.changeNavigation,r=e.grid,o=function(e){var r=e.key,n=K[r];n&&t(n)};return Object(n.useEffect)(function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}},[]),a.a.createElement("table",{className:q.grid},a.a.createElement("tbody",null,Q(r)))},$=(r(53),function(e){var t=e.checked,r=e.label,n=e.onChange;return a.a.createElement("label",{className:"container"},r,a.a.createElement("input",{type:"checkbox",checked:t,onChange:n}),a.a.createElement("span",{className:"checkmark"}))}),ee={button:Object(D.css)({alignItems:"center",backgroundColor:"#FFFFFF",border:"1px solid #4286F4",borderRadius:"5px",color:"#4286F4",cursor:"pointer",display:"flex",fontSize:"16px",height:"30px",padding:"5px",":hover":{backgroundColor:"#4286F4",color:"#FFFFFF"},":focus":{outline:"none"}})},te=function(e){return a.a.createElement("button",Object.assign({className:ee.button},e),e.children)},re={menu:Object(D.css)({display:"flex",listStyle:"none",marginBottom:"30px"}),listItem:Object(D.css)({borderBottom:"2px solid #FFFFFF",cursor:"pointer",marginRight:"20px",padding:"10px 0"}),listItemActive:Object(D.css)({borderBottom:"2px solid #CCCCCC"})},ne={BEGINNER:"Beginner",INTERMEDIATE:"Intermediate",EXPERT:"Expert"},ae=function(e){var t=e.action,r=e.level,n=e.selectedLevel;return a.a.createElement("li",Object.assign({},Object(D.css)(re.listItem,r===n?re.listItemActive:""),{onClick:t.bind(void 0,r)}),ne[r])},oe=function(){var e=Object(n.useContext)(V),t=e.changeLevel,r=e.selectedLevel;return a.a.createElement("ul",{className:re.menu},["BEGINNER","INTERMEDIATE","EXPERT"].map(function(e){return a.a.createElement(ae,{action:t,key:e,level:e,selectedLevel:r})}))},ie={container:Object(D.css)({marginRight:"50px"}),wrapper:Object(D.css)({marginBottom:"30px"}),info:Object(D.css)({color:"#4286F4",fontSize:"20px",fontWeight:"bold"}),button:Object(D.css)({backgroundColor:"#FFFFFF",border:"1px solid #AAAAAA",borderRadius:"5px",color:"#AAAAAA",cursor:"pointer",fontSize:"16px",height:"30px",padding:"5px",":hover":{backgroundColor:"#AAAAAA",color:"#FFFFFF"},":focus":{outline:"none"}}),victory:Object(D.css)({color:"#4286F4",fontSize:"20px",fontWeight:"bold",marginTop:"30px"}),cheatArea:Object(D.css)({border:"1px solid #BBBBBB",marginTop:"30px",padding:"10px","> h1":{color:"#555555",fontSize:"20px",marginBottom:"10px"}}),hints:Object(D.css)({lineHeight:"24px",padding:"20px"})},ce=function(){var e=Object(n.useContext)(V),t=e.bombsRemaining,r=e.cheat,o=e.cleanCorners,i=e.isVictory,c=e.restartGame,l=e.time,s=e.toggleCheatHover;return a.a.createElement("div",{className:ie.container},a.a.createElement(oe,null),a.a.createElement("div",{className:ie.wrapper},a.a.createElement("div",{className:ie.container},a.a.createElement("p",null,"Bombs remaining:"," ",a.a.createElement("span",{className:ie.info},t)),a.a.createElement("p",null,"Time: ",a.a.createElement("span",{className:ie.info},l)))),a.a.createElement(te,{onClick:c},"Restart"),a.a.createElement("div",{className:ie.victory},i?"Victory :)":""),a.a.createElement("div",{className:ie.cheatArea},a.a.createElement("h1",null,"Cheat area"),a.a.createElement($,{checked:r.hover,label:"Show hover",onChange:s}),a.a.createElement(te,{onClick:o},"Start with clean corners")),a.a.createElement("div",{className:ie.hints},a.a.createElement("p",null,a.a.createElement("strong",null,"Arrow keys"),": move"),a.a.createElement("p",null,a.a.createElement("strong",null,"Enter / A"),": click cell"),a.a.createElement("p",null,a.a.createElement("strong",null,"F"),": toggle flag"),a.a.createElement("p",null,a.a.createElement("strong",null,"R"),": restart"),a.a.createElement("p",null,a.a.createElement("strong",null,"C"),": start with clean corners")))},le={app:Object(D.css)({display:"flex",justifyContent:"center"})},se=function(){return a.a.createElement("div",{className:le.app},a.a.createElement(S,null,a.a.createElement(ce,null),a.a.createElement(Z,null)))};r(54);i.a.render(a.a.createElement(se,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.39d93fe0.chunk.js.map