(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(28)},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(5),c=n.n(i),l=n(9),o=n(2),s=n.n(o),u=n(6),m=n(1),d=n(7),g=n(10),v=n(8),f=n(11),h={BEGINNER:9,INTERMEDIATE:16,EXPERT:30},E={BEGINNER:9,INTERMEDIATE:16,EXPERT:16},b={READY:0,PLAYING:1,GAME_OVER:2,VICTORY:3},p={BEGINNER:10,INTERMEDIATE:40,EXPERT:99},w=function(e){return e.row-1>=0},C=function(e,t){return e.row+1<t},N=function(e){return e.column-1>=0},R=function(e,t){return e.column+1<t},O=function(e,t){return e===b.READY&&(t.length>1||!t[0].hasBomb)},A=function(e,t){return t?e-1:e+1},k=n(3),I=function(e,t){var n=e*t;return Object(k.a)(Array(n)).reduce(function(e,n,a){var r=parseInt(a,10);return[].concat(Object(k.a)(e),[{id:r,row:Math.floor(r/t),column:r%t,hasBomb:!1,hasFlag:!1,dangerLevel:0,isHovered:!1,isVisible:!1,neighbors:[]}])},[])},L=function(e,t,n,a,r){for(var i=new Set;i.size<a;){var c=T(e,t,n,r);i.add(c)}return e.map(function(e){return i.has(e.id)?Object(m.a)({},e,{hasBomb:!0,explode:!1}):e})},G=function(e){return Math.floor(Math.random()*e)},T=function(e,t,n,a){var r=t*n;if(!a)return G(r);for(var i=[e[0].id,e[n-1].id,e[(t-1)*n].id,e[e.length-1].id],c=null;!c;){var l=G(r);i.includes(l)||(c=l)}return c},_=function(e,t,n){return e.map(function(e){var a=e.neighbors;return w(e)&&N(e)&&a.push(e.id-n-1),w(e)&&a.push(e.id-n),w(e)&&R(e,n)&&a.push(e.id-n+1),N(e)&&a.push(e.id-1),R(e,n)&&a.push(e.id+1),C(e,t)&&N(e)&&a.push(e.id+n-1),C(e,t)&&a.push(e.id+n),C(e,t)&&R(e,n)&&a.push(e.id+n+1),Object(m.a)({},e,{neighbors:a})})},B=function(e){return e.map(function(t){return Object(m.a)({},t,{dangerLevel:j(e,t)})})},j=function(e,t){return t.neighbors.reduce(function(t,n){return e[n].hasBomb?t+1:t},0)},y=function(e,t){return e.filter(function(e){return e.isVisible}).length+t===e.length},V=r.a.createContext(),x=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={bombsRemaining:10,cheat:{cleanCorners:!1,hover:!1},grid:[],navigateUsingArrow:0,status:b.READY,selectedLevel:"BEGINNER",time:0},n.timer=function(){},n.componentDidMount=function(){return n.startGrid()},n.startGrid=function(){var e=n.state.selectedLevel,t=p[e],a=E[e],r=h[e],i=n.state.cheat.cleanCorners,c=I(a,r),l=L(c,a,r,t,i),o=_(l,a,r),s=B(o);n.setState({grid:s})},n.restartGame=function(e){e&&0===e.detail||(n.stopTimer(),n.setState({bombsRemaining:p[n.state.selectedLevel],cheat:Object(m.a)({},n.state.cheat,{cleanCorners:!1}),navigateUsingArrow:0,status:b.READY,time:0}),n.startGrid())},n.changeLevel=function(e){n.setState({selectedLevel:e},n.restartGame)},n.cellClicked=function(e){var t=n.state,a=t.selectedLevel,r=t.status;if(r===b.READY||r===b.PLAYING){var i,c=p[a],l=!0,o=!1,s=void 0;try{for(var u,m=e[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var d=u.value;if(d.isVisible)return;if(d.hasFlag)return;i=n.changeCellToVisible(n.state.grid,d),d.hasBomb?(n.setState({status:b.GAME_OVER}),i=n.clickedOnBomb(i,d)):y(i,c)&&(n.stopTimer(),n.setState({status:b.VICTORY}))}}catch(g){o=!0,s=g}finally{try{l||null==m.return||m.return()}finally{if(o)throw s}}O(r,e)&&n.setState({status:b.PLAYING},n.startTimer),n.setState({grid:i})}},n.changeCellToVisible=function(e,t){return e[t.id]=Object(m.a)({},t,{isVisible:!0}),0!==t.dangerLevel||t.hasBomb||t.isVisible||t.neighbors.forEach(function(t){n.changeCellToVisible(e,e[t])}),e},n.clickedOnBomb=function(e,t){return n.stopTimer(),n.updateGrid(e,t.id,{isVisible:!0,explode:!0}).map(function(e){return e.hasBomb&&!e.explode?Object(m.a)({},e,{isVisible:!0}):e})},n.toggleFlag=function(e,t){if(t&&t.preventDefault(),!e.isVisible){var a=n.state.grid[e.id],r=!a.hasFlag,i=n.updateGrid(n.state.grid,a.id,{hasFlag:r});n.setState({bombsRemaining:A(n.state.bombsRemaining,r),grid:i})}},n.updateGrid=function(e,t,n){return e.map(function(e){return e.id!==t?e:Object(m.a)({},e,n)})},n.setHover=function(e,t){if(n.state.cheat.hover){var a=n.updateGrid(n.state.grid,e.id,{isHovered:t});e.neighbors.forEach(function(e){a[e].isHovered=t}),n.setState({grid:a})}},n.cleanCorners=function(e){e&&0===e.detail||n.setState({cheat:Object(m.a)({},n.state.cheat,{cleanCorners:!0})},Object(u.a)(s.a.mark(function e(){var t,a,r,i,c,l,o,u,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.restartGame();case 2:t=n.state,a=t.grid,r=t.selectedLevel,i=E[r],c=h[r],l=a[0],o=a[c-1],u=a[(i-1)*c],m=a[a.length-1],n.cellClicked([l,o,u,m]);case 10:case"end":return e.stop()}},e)})))},n.toggleCheatHover=function(){var e=n.state.cheat;n.setState({cheat:Object(m.a)({},e,{hover:!e.hover})})},n.changeNavigation=function(e){var t=n.state.navigateUsingArrow,a=n.state.grid[t],r=n.state.selectedLevel,i=E[r],c=h[r],l=t;"down"===e&&C(a,i)?l=t+c:"up"===e&&w(a)?l=t-c:"left"===e&&N(a)?l=t-1:"right"===e&&R(a,c)?l=t+1:"trigger"===e?n.cellClicked([a]):"flag"===e?n.toggleFlag(a):"restart"===e?n.restartGame():"clean"===e&&n.cleanCorners(),n.setState({navigateUsingArrow:l})},n.startTimer=function(){n.timer=setInterval(function(){n.setState({time:n.state.time+1})},1e3)},n.stopTimer=function(){clearInterval(n.timer)},n.render=function(){return r.a.createElement(V.Provider,{value:{bombsRemaining:n.state.bombsRemaining,changeLevel:n.changeLevel,changeNavigation:n.changeNavigation,cellClicked:n.cellClicked,cheat:n.state.cheat,cleanCorners:n.cleanCorners,grid:n.state.grid,isGameOver:n.state.status===b.GAME_OVER,isVictory:n.state.status===b.VICTORY,navigateUsingArrow:n.state.navigateUsingArrow,restartGame:n.restartGame,selectedLevel:n.state.selectedLevel,time:n.state.time,toggleCheatHover:n.toggleCheatHover,toggleFlag:n.toggleFlag,setHover:n.setHover}},n.props.children)},n}return Object(f.a)(t,e),t}(r.a.Component),F=V,S=(n(19),["","#4286F4","#0BA51B","#6E25DB","#DB7325","#E22FB6","#D11F1F","#398452","#683B39"]),D=function(e,t){return e.hasFlag?"cell--flag":e.isVisible&&e.explode?"cell--exploded":e.isVisible?"cell--visible":t?"cell--over":"cell--common"},M=function(e){if(e.isHovered)return"cell--hovered"},H=function(e,t){if(e.id===t)return"cell--navigation"},Y=function(e){return e.hasFlag?"\ud83d\udea9":e.isVisible?e.hasBomb?"\ud83d\udca3":e.dangerLevel>0?e.dangerLevel:"":""},P=function(e){var t=e.cell,n=Object(a.useContext)(F),i=n.isGameOver,c=n.cellClicked,l=n.navigateUsingArrow,o=n.toggleFlag,s=n.setHover;return r.a.createElement("td",{className:"cell ".concat(D(t,i)," ").concat(M(t)," ").concat(H(t,l)),style:{color:S[t.dangerLevel]},onClick:c.bind(void 0,[t]),onContextMenu:o.bind(void 0,t),onMouseEnter:s.bind(void 0,t,!0),onMouseLeave:s.bind(void 0,t,!1)},r.a.createElement("span",{className:t.hasBomb||t.hasFlag?"cell__emoji":"cell__value"},Y(t)))},U=(n(20),function(e){var t=e.row;return r.a.createElement("tr",{className:"row"},t.map(function(e,t){return r.a.createElement(P,{key:"cell-".concat(t),cell:e})}))}),X=(n(21),{ArrowDown:"down",ArrowUp:"up",ArrowLeft:"left",ArrowRight:"right",Enter:"trigger",a:"trigger",f:"flag",r:"restart",c:"clean"}),J=function(e){for(var t,n=(t=function(e){return e.row},e.reduce(function(e,n){var a=t(n);return e[a]?e[a].push(n):e[a]=[n],e},{})),a=[],i=0,c=Object.entries(n);i<c.length;i++){var o=c[i],s=Object(l.a)(o,2),u=s[0],m=s[1];a.push(r.a.createElement(U,{key:"row-".concat(u),row:m}))}return a},z=function(){var e=Object(a.useContext)(F),t=e.changeNavigation,n=e.grid,i=function(e){var n=e.key,a=X[n];a&&t(a)};return Object(a.useEffect)(function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}}),r.a.createElement("table",{className:"grid"},r.a.createElement("tbody",null,J(n)))},q=(n(22),function(e){var t=e.checked,n=e.label,a=e.onChange;return r.a.createElement("label",{className:"container"},n,r.a.createElement("input",{type:"checkbox",checked:t,onChange:a}),r.a.createElement("span",{className:"checkmark"}))}),K=(n(23),function(e){return r.a.createElement("button",Object.assign({className:"button"},e),e.children)}),Q=(n(24),{BEGINNER:"Beginner",INTERMEDIATE:"Intermediate",EXPERT:"Expert"}),W=function(e){var t=e.action,n=e.level,a=e.selectedLevel;return r.a.createElement("li",{className:"\n      menu__listItem\n      ".concat(n===a?"menu__listItem--active":""),onClick:t.bind(void 0,n)},Q[n])},Z=function(){var e=Object(a.useContext)(F),t=e.changeLevel,n=e.selectedLevel;return r.a.createElement("ul",{className:"menu__container"},["BEGINNER","INTERMEDIATE","EXPERT"].map(function(e){return r.a.createElement(W,{action:t,key:e,level:e,selectedLevel:n})}))},$=(n(25),function(){var e=Object(a.useContext)(F),t=e.bombsRemaining,n=e.cheat,i=e.cleanCorners,c=e.isVictory,l=e.restartGame,o=e.time,s=e.toggleCheatHover;return r.a.createElement("div",{className:"info__container"},r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement("div",{className:"info__wrapper"},r.a.createElement("p",null,"Bombs remaining:"," ",r.a.createElement("span",{className:"info__text"},t)),r.a.createElement("p",null,"Time: ",r.a.createElement("span",{className:"info__text"},o))),r.a.createElement(K,{onClick:l},"Restart")),r.a.createElement("div",{className:"info__victory"},c?"Victory :)":""),r.a.createElement("div",{className:"info__cheatArea"},r.a.createElement("h1",null,"Cheat area"),r.a.createElement(q,{checked:n.hover,label:"Show hover",onChange:s}),r.a.createElement(K,{onClick:i},"Start with clean corners")),r.a.createElement("div",{className:"info__hints"},r.a.createElement("p",null,r.a.createElement("strong",null,"Arrow keys"),": move"),r.a.createElement("p",null,r.a.createElement("strong",null,"Enter / A"),": click cell"),r.a.createElement("p",null,r.a.createElement("strong",null,"F"),": toggle flag"),r.a.createElement("p",null,r.a.createElement("strong",null,"R"),": restart"),r.a.createElement("p",null,r.a.createElement("strong",null,"C"),": start with clean corners")))}),ee=(n(26),function(){return r.a.createElement("div",{className:"app"},r.a.createElement(x,null,r.a.createElement($,null),r.a.createElement(z,null)))});n(27);c.a.render(r.a.createElement(ee,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.9b0df348.chunk.js.map